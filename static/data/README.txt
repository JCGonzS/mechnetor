-----------------------------
DATA FILES FOR INT2MECH & PIV
-----------------------------
Oct 2018
-----------------------------



Short instructions summary
--------------------------

1. Download all required sources files. See list below

From static/data: run

2. Run "prepare_data_files.py" to generate some additional files.

3. Run "make_protein_data_json" to generate json file with required protein annotation

4. Run "create_mongo_dbs.sh" to create Mongo databases and collections

5. manually create mongodb indexes



Data Files
----------
Data files are divided into:
- species-specific (eg. Homo sapiens or 'Hsa'): --> static/data/species/Hsa/
  - common (same for any species) --> static/data/common/

Original data files must be obtained from their original sources and put into
one these two directories.
Required source files are the following:
> Species:
  - BioGRID:
  - InterPreTs results (only BioGRID interacting pairs):

> Common
  - 3did:



*****************
MongoDB structure
*****************

Databases & collections:

  > protein_data
    - Hsa

  > interactions_common
    - db3did

  > interactions_Hsa
    - biogrid_Hsa
    - iprets_Hsa


**************************
Importing files to MongoDB
**************************

MongoDB accepts files in json, csv or tsv formats.

The following instructions explains in detail how this files need to be processed
so they can be used by PIV.


-------------------
A. SPECIES-SPECIFIC
-------------------

I. Protein Data JSON
----------------------
* Contains info/annotations for every organism proteins, from:
  - UniProt: accession, gene, description
  - Pfam: domains
  - ELM: linear motifs
  - PSP: post-translational modifications (phoshorylations and acetylations)
  - COSMIC: cancer mutations

1. Use 'make_protein_data_json.py' to generate JSON file in the species folder
2. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
3. Create indexes for this database in mongo shell:
   > use protein_data
   > db.Hsa.createIndex( { "uniprot_acc": 1} )


II. BioGRID -  Biological General Repository for Interaction Datasets
--------------------------------------------------------------------
* thebiogrid.org/
* version 3.5.165 (Oct 2018)
* Source file: "species/sp/BIOGRID-ORGANISM-'SpeciesName'-3.5.165.tab2.txt.gz"
  (Columns definitions at: wiki.thebiogrid.org/doku.php/biogrid_tab_version_2.0)

1. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
2. Create indexes for this database in mongo shell:
    > use interactions_Hsa
    > db.biogrid_Hsa.createIndex( {"Official Symbol Interactor A": 1,
                                   "Official Symbol Interactor B": 1} )


III. InterPreTS - Interaction Prediction through Tertiary Structure
------------------------------------------------------------------
* russelllab.org/cgi-bin/tools/interprets.pl/
* Results of the predictions for all interaction pairs according to BioGRID
* Source file: "species/sp/human_aaa_biogrid_i2.txt.gz"

1. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
2. Create indexes for this database in mongo shell:
    > use interactions_Hsa
    > db.iprets_Hsa.createIndex( { "#Gene1": 1, "Gene2": 1 } )


IV. Domain Propensities
-----------------------
* This contains the abundance and some statistics of the different Pfam domains
  in the organism proteome
* Version? generated by Rob. It probably need updating and some fine-tuning.
* Source file: "species/sp/dom_dom_lo.csv.gz"

1. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
2. Create indexes for this database in mongo shell:
    > use interactions_Hsa
    > db.domain_propensities.createIndex( { "#DOM1": 1, "DOM2": 1 } )


---------
B. COMMON
---------

V. 3did - Database of three-dimensional interacting domains
------------------------------------------------------------
* 3did.irbbarcelona.org/
* version 2018_04
* Source file: "common/3did_flat-2018-04.gz"

1. File needs to be parsed into a tsv format with "prepare_data_files.py"
   Generates "3did_flat_edited-2018_04.tsv.gz"
2. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
3. Create indexes for this database in mongo shell:
   > use interactions_gen
   > db.db3did.createIndex( { "Pfam_Name_A": 1, "Pfam_Name_B": 1} )


VI. ELM (interactions)- Eukaryotic LM - domain interactions
-----------------------------------------------------------
* elm.eu.org
* version downloaded in June 2018
* Source file: "common/elm_interaction_domains_edited_Jan18.tsv"
  This file has been manually edited to add an additional column that contains
  the name of the proteins where the domain has to be to consider the interaction
1. Use 'create_mongo_dbs.sh' to create collection in the Mongo interactions database
2. No need to create indexes, since the db is read and store in a dictionary,
  every time the tool runs.


others:
COSMIC v87
indexed by 'uni_ac'
