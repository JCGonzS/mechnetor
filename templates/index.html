<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Protein Interaction Visualization</title>
	<link rel="shortcut icon" type="image/x-icon" href="static/images/piv_icon.ico">

	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Staatliches|Lato|Source+Sans+Pro:400,600">
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/common.css') }}"/>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/index_style.css') }}"/>

	<script type="text/javascript" src="{{ url_for('static',filename='js/jquery-3.3.1.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static',filename='js/index.js') }}"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/additional-methods.js"></script>
</head>

<body>
	
	<div class="grid-container">

		{% include "header.html" %}

		<div class="content">

			<div id="loading_msg">Your job is running...</div><br>
			<div class="loader"></div>

			<!-- <div class="container">
				<div id="intro">
					<h6><b>What PIV can do:</b></h6>
					<ul>
						<li>Create an interactive network with your protein(s) of interest and their known interactors.</li>
						<li>Visualize diverse interaction data.</li>
						<li>Map mutations and protein modifications.</li>
					</ul>
				</div>
			</div> -->
			<!-- <br> -->

			<div class="main-container">
				<div class="form-group row align-items-center">
					<div class="col-sm-9">
						<form name="myForm" action="/output" method="post" novalidate="novalidate">

							<!-- <div class="form-group row">
								<div class="col-sm">
									<input id="name" name="query_name" placeholder="Name your query" type="text">
								</div>
							</div> -->

							<div class="form-group row align-items-center">
								<div class="col-sm">
									<label for="prots_input"><b>Proteins</b></label>
									<br>
									<textarea id="prots_input" name="prots_input" aria-required="true" required=""
										placeholder="Enter a list of interacting proteins"></textarea>
									<br>
									<label for="prots_input_file">Or select a file:</label>
									<input type="file" id="prots_input_file">
									<br>
									<button type="button" class="button1"	id="prots_input_upload" onclick="uploadInput('prots_input')">Upload</button>
									<button type="button" class="button1" onclick="resetInput('prots_input')">
										<i class="fas fa-backspace"></i>
									</button>
								</div>

								<div class="col-sm">
									<label for="muts_input"><b>Mutations (optional)</b></label>
									<br>
									<textarea id="muts_input" name="muts_input" aria-required="true"
										placeholder="Enter a list of protein mutations"></textarea>
									<br>
									<label for="muts_input_file">Or select a file:</label>
									<input type="file" id="muts_input_file">
									<br>
									<button type="button" class="button1" id="muts_input_upload" onclick="uploadInput('muts_input')">Upload</button>
									<button type="button" class="button1" onclick="resetInput('muts_input')">
										<i class="fas fa-backspace"></i>
									</button>
								</div>
							</div>

							<div class="form-group row align-items-center">
								<div class="col-sm">
									<label for="species">Organism:</label>
									<!-- <input type="text" list="species"> -->
									<select name="species" id="species">
											<option value="any">Automatic/More than one</option>
											<option value="HUMAN" selected>Human (Homo sapiens, TaxId: 9606)</option>
											<option value="MOUSE">Mouse (Mus musculus, TaxId: 10090)</option>
											<option value="DROME">Fruit Fly (Drosophila melanogaster, TaxId: 7227)</option>
											<option value="ARATH">Arabidopsis (Arabidopsis thaliana, TaxId: 3702)</option>
											<option value="CAEEL">Worm (Caenorhabditis elegans, TaxId: 6239)</option>
											<option value="DANRE">Zebrafish (Danio rerio, TaxId: 7955)</option>
											<option value="XENTR">Frog (Xenopus tropicalis, TaxId: 8364)</option>
											<option value="YEAST">Yeast (Saccharomyces cerevisiae [S288C], TaxId: 559292)</option>
									</select>
								</div>
							</div>
							<div class="form-group row align-items-center">
								<div class="col-sm">
									<label for="hide_no_int">Hide proteins with no interactions</label>
									<input type="checkbox" id="hide_no_int" name="hide_no_int" value="true" checked>
								</div>
							</div>
							<div class="form-group row align-items-center">
								<div class="col-sm">
									<label for="add_n_interactors">Add additional interactors per protein: </label>
									<input type="number" id="add_n_interactors" name="add_n_interactors" value="0">
									<label for="all_interactors"> or show all</label>
									<input type="checkbox" id="all_interactors" name="all_interactors">
									<label for="only_int_pairs">Show interactions only between protein and its interactors</label>
									<input type="checkbox" id="only_int_pairs" name="only_int_pairs" value="true" checked>
								</div>
							</div>

							<div class="form-group row align-items-center">
								<div class="col-sm">
									<div>
										<hr>
										Examples:
										<button class="button1 ex_button" type="button" id="ex1">1</button>
										<button class="button1 ex_button" type="button" id="ex2">2</button>
										<button class="button1 ex_button" type="button" id="ex3">3</button>
										<button class="button1 ex_button" type="button" id="ex4">4</button>
										<button class="button1 ex_button" type="button" id="ex5">5</button>
									</div>
									<div>
										<button type="submit" class="button1 button2" id="submit-button" onclick="loading();">Submit</button>
										<button type="reset" class="button1 button2" id="reset-button">Reset</button>
									</div>
								</div>
							</div>
						</form>
			    	</div>
		   		</div>
			</div>
		</div>

		{% include "footer.html" %}
	
	</div>

	<script>
		function loading(){
			document.body.scrollTop = 0;
     		document.documentElement.scrollTop = 0;
			$("#loading_msg").show();
			$(".loader").show();
			$(".main-container").hide();
		}
		function uploadInput(id) {
			var fileInput = document.querySelector('#'+id+'_file');
			var textFromFile = "";
			var file = fileInput.files[0];
			var reader = new FileReader();
			reader.onload = function(e) {
				textFromFile = e.target.result;
				document.getElementById(id).value = textFromFile;
			}
			reader.readAsText(file);
		};

		function resetInput(id) {
			document.getElementById(id).value="";
		}
	</script>
</body>
</html>
